{
	"title": "Kubectl",
	"description": "A comprehensive guide to kubectl (Kubernetes CLI) for viewing, deploying, debugging, and managing Kubernetes resources.",
	"language": "shell",
	"categories": [
		{
			"title": "Installation and Initial Setup",
			"description": "Install kubectl and verify connectivity to a cluster.",
			"items": [
				{
					"title": "Install kubectl",
					"description": "Common install options (exact steps vary by distro/version).",
					"table": {
						"headers": ["System", "Command"],
						"rows": [
							["macOS (Homebrew)", "brew install kubectl"],
							["Windows (Chocolatey)", "choco install kubernetes-cli"],
							["Linux (snap)", "sudo snap install kubectl --classic"],
							["Kubernetes docs", "https://kubernetes.io/docs/tasks/tools/" ]
						]
					},
					"example": null
				},
				{
					"title": "Quick checks",
					"description": "Verify kubectl is installed and can talk to a cluster.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl version --client", "Show kubectl client version."],
							["kubectl version --short", "Show client/server versions (requires cluster access)."],
							["kubectl cluster-info", "Show cluster endpoint info."],
							["kubectl get nodes", "List nodes (tests auth + connectivity)."],
							["kubectl get ns", "List namespaces."],
							["kubectl config view", "Show merged kubeconfig (sanitized by default)." ]
						]
					},
					"example": "kubectl version --client\nkubectl cluster-info\nkubectl get nodes"
				}
			]
		},
		{
			"title": "Kubeconfig, Contexts, and Namespaces",
			"description": "Switch clusters/users/namespaces and keep commands scoped correctly.",
			"items": [
				{
					"title": "Contexts",
					"description": "Context = cluster + user + (optional) namespace.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl config get-contexts", "List contexts."],
							["kubectl config current-context", "Show current context."],
							["kubectl config use-context <name>", "Switch context."],
							["kubectl config set-context --current --namespace=<ns>", "Set default namespace for current context."],
							["kubectl --context <ctx> get pods", "Run one command against a specific context." ]
						]
					},
					"example": "kubectl config get-contexts\nkubectl config use-context dev\nkubectl config set-context --current --namespace=default"
				},
				{
					"title": "Namespaces",
					"description": "Scope commands to a namespace (or all namespaces).",
					"table": {
						"headers": ["Flag/Command", "Description"],
						"rows": [
							["-n <ns>", "Run in a specific namespace."],
							["-A / --all-namespaces", "Run across all namespaces."],
							["kubectl get ns", "List namespaces."],
							["kubectl create ns <ns>", "Create namespace."],
							["kubectl delete ns <ns>", "Delete namespace." ]
						]
					},
					"example": "kubectl get pods -n kube-system\nkubectl get pods -A"
				}
			]
		},
		{
			"title": "Discovering APIs and Resources",
			"description": "Explore what resources exist and what fields they support.",
			"items": [
				{
					"title": "API discovery",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl api-resources", "List resource kinds and shortnames."],
							["kubectl api-versions", "List API versions available."],
							["kubectl explain <resource>", "Show resource documentation."],
							["kubectl explain <resource>.<field>", "Show documentation for a field." ]
						]
					},
					"example": "kubectl api-resources\nkubectl explain deployment\nkubectl explain deployment.spec.template.spec.containers"
				}
			]
		},
		{
			"title": "Viewing and Inspecting Resources",
			"description": "Get, describe, and output formatting.",
			"items": [
				{
					"title": "get / describe",
					"description": "Use describe for human-friendly details and events.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get <resource>", "List resources."],
							["kubectl get <resource> <name>", "Get a specific resource."],
							["kubectl describe <resource> <name>", "Detailed state + events."],
							["kubectl get events -n <ns> --sort-by=.metadata.creationTimestamp", "Sorted events."],
							["kubectl get <resource> -o wide", "Add node/IP columns where available." ]
						]
					},
					"example": "kubectl get pods -n default\nkubectl describe pod my-pod -n default"
				},
				{
					"title": "Output formats",
					"description": "Use -o yaml/json to inspect and save manifests.",
					"table": {
						"headers": ["Flag", "Description"],
						"rows": [
							["-o wide", "Extra columns."],
							["-o yaml", "YAML output."],
							["-o json", "JSON output."],
							["-o name", "Only resource names."],
							["-o jsonpath='{...}'", "Extract specific fields."],
							["-o custom-columns=...", "Custom columns output." ]
						]
					},
					"example": "kubectl get deploy myapp -o yaml\nkubectl get pods -o jsonpath='{.items[*].metadata.name}'"
				}
			]
		},
		{
			"title": "Create, Apply, Delete",
			"description": "Manage manifests and live objects.",
			"items": [
				{
					"title": "Apply and delete manifests",
					"description": "Prefer apply for declarative workflows.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl apply -f file.yaml", "Create/update resources from a file."],
							["kubectl apply -f dir/", "Apply all manifests in a directory."],
							["kubectl delete -f file.yaml", "Delete resources defined in file."],
							["kubectl diff -f file.yaml", "Show the diff before applying."],
							["kubectl apply --server-side -f file.yaml", "Use server-side apply (SSA)."],
							["kubectl apply -f https://.../manifest.yaml", "Apply from a URL." ]
						]
					},
					"example": "kubectl diff -f k8s/\nkubectl apply -f k8s/\nkubectl get all -n default"
				},
				{
					"title": "Imperative create",
					"description": "Quick object creation from the CLI (useful for experiments).",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl create deployment <name> --image=<image>", "Create a deployment."],
							["kubectl expose deployment <name> --port=80 --type=ClusterIP", "Create a service for a deployment."],
							["kubectl create configmap <name> --from-literal=k=v", "Create a configmap."],
							["kubectl create secret generic <name> --from-literal=k=v", "Create a generic secret."],
							["kubectl run <name> --image=<image> --restart=Never", "Run a one-off pod (often for debugging)." ]
						]
					},
					"example": "kubectl create deployment nginx --image=nginx:stable\nkubectl expose deployment nginx --port=80 --type=ClusterIP"
				}
			]
		},
		{
			"title": "Pods: Logs, Exec, Port-Forward, Copy",
			"description": "Day-to-day debugging and interaction with containers.",
			"items": [
				{
					"title": "Logs",
					"description": "Inspect container logs and follow output.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl logs <pod>", "Show logs for a pod (single container)."],
							["kubectl logs <pod> -c <container>", "Logs for a specific container."],
							["kubectl logs -f <pod>", "Follow logs."],
							["kubectl logs <pod> --previous", "Logs from the previous container instance (after restart)."],
							["kubectl logs -l app=myapp --tail=200", "Logs for pods matching a label selector." ]
						]
					},
					"example": "kubectl logs -n default my-pod\nkubectl logs -n default my-pod -c app -f"
				},
				{
					"title": "Exec and shells",
					"description": "Run commands inside a running container.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl exec -it <pod> -- sh", "Interactive shell (busybox/alpine)."],
							["kubectl exec -it <pod> -c <container> -- bash", "Shell in a specific container."],
							["kubectl exec <pod> -- env", "Run a non-interactive command." ]
						]
					},
					"example": "kubectl exec -it -n default my-pod -- sh\nkubectl exec -n default my-pod -- ls -la"
				},
				{
					"title": "Port-forward and copy",
					"description": "Tunnel a local port to a pod/service and copy files.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl port-forward pod/<pod> 8080:80", "Forward local 8080 to pod 80."],
							["kubectl port-forward svc/<svc> 8080:80", "Forward to a service."],
							["kubectl cp <ns>/<pod>:/path ./local", "Copy from pod to local."],
							["kubectl cp ./local <ns>/<pod>:/path", "Copy from local into pod." ]
						]
					},
					"example": "kubectl port-forward -n default svc/my-svc 8080:80\n# then browse http://localhost:8080"
				}
			]
		},
		{
			"title": "Deployments and Rollouts",
			"description": "Create, scale, update, and roll back workloads.",
			"items": [
				{
					"title": "Scaling and updating",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl scale deploy/<name> --replicas=3", "Scale a deployment."],
							["kubectl set image deploy/<name> <container>=<image>", "Update an image."],
							["kubectl rollout status deploy/<name>", "Watch rollout progress."],
							["kubectl rollout history deploy/<name>", "Show rollout history."],
							["kubectl rollout undo deploy/<name>", "Rollback to previous revision."],
							["kubectl rollout undo deploy/<name> --to-revision=2", "Rollback to a specific revision." ]
						]
					},
					"example": "kubectl set image deploy/myapp app=myrepo/myapp:1.2.3\nkubectl rollout status deploy/myapp"
				},
				{
					"title": "Restart and pause",
					"description": "Force a restart or pause a rollout.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl rollout restart deploy/<name>", "Restart pods by updating a template annotation."],
							["kubectl rollout pause deploy/<name>", "Pause rollout."],
							["kubectl rollout resume deploy/<name>", "Resume rollout." ]
						]
					},
					"example": "kubectl rollout restart deploy/myapp\nkubectl get pods -l app=myapp"
				}
			]
		},
		{
			"title": "Services, Ingress, and Networking",
			"description": "Expose workloads and inspect networking-related resources.",
			"items": [
				{
					"title": "Services",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get svc", "List services."],
							["kubectl describe svc <name>", "Inspect service selectors and endpoints."],
							["kubectl get endpoints", "List endpoints (legacy)."],
							["kubectl get endpointslices", "List EndpointSlices (modern)."],
							["kubectl port-forward svc/<name> 8080:80", "Test service connectivity locally." ]
						]
					},
					"example": "kubectl get svc -n default\nkubectl describe svc my-svc -n default"
				},
				{
					"title": "Ingress",
					"description": "Ingress requires an Ingress controller (nginx, traefik, etc.).",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get ingress", "List ingresses."],
							["kubectl describe ingress <name>", "Inspect rules and backend services."],
							["kubectl get ingressclass", "List available IngressClasses." ]
						]
					},
					"example": "kubectl get ingress -A\nkubectl describe ingress my-ing -n default"
				},
				{
					"title": "Network policies",
					"description": "NetworkPolicy support depends on the CNI.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get networkpolicy -A", "List network policies."],
							["kubectl describe networkpolicy <name>", "Inspect policy rules." ]
						]
					},
					"example": "kubectl get networkpolicy -n default"
				}
			]
		},
		{
			"title": "ConfigMaps and Secrets",
			"description": "Configuration and sensitive data.",
			"items": [
				{
					"title": "ConfigMaps",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get configmap -n <ns>", "List configmaps."],
							["kubectl describe configmap <name> -n <ns>", "Inspect configmap."],
							["kubectl create configmap <name> --from-file=app.conf", "Create from file."],
							["kubectl create configmap <name> --from-literal=k=v", "Create from literal." ]
						]
					},
					"example": "kubectl create configmap app-config --from-file=app.conf -n default"
				},
				{
					"title": "Secrets",
					"description": "Kubernetes Secrets are base64-encoded by default (not encrypted unless at-rest encryption is configured).",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get secret -n <ns>", "List secrets."],
							["kubectl describe secret <name> -n <ns>", "Inspect secret metadata."],
							["kubectl create secret generic <name> --from-literal=k=v", "Create generic secret."],
							["kubectl create secret tls <name> --cert=crt.pem --key=key.pem", "Create TLS secret."],
							["kubectl get secret <name> -o jsonpath='{.data.key}' | base64 -d", "Decode a secret value." ]
						]
					},
					"example": "kubectl create secret generic db --from-literal=password=supersecret -n default\nkubectl get secret db -n default -o jsonpath='{.data.password}' | base64 -d"
				}
			]
		},
		{
			"title": "Labels, Selectors, and Annotations",
			"description": "How to target and organize resources.",
			"items": [
				{
					"title": "Selectors",
					"description": "Use label selectors to filter resources.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get pods -l app=myapp", "Filter by label."],
							["kubectl get pods -l 'app in (a,b)'", "Set-based selector."],
							["kubectl get pods --show-labels", "Display labels."],
							["kubectl label pod <pod> tier=backend", "Add/update a label."],
							["kubectl annotate pod <pod> note='hello'", "Add/update an annotation."],
							["kubectl label pod <pod> tier-", "Remove a label." ]
						]
					},
					"example": "kubectl get pods -A -l 'app=myapp,env=prod'\nkubectl label pod my-pod -n default tier=backend"
				}
			]
		},
		{
			"title": "Patching, Editing, and Waiting",
			"description": "Change live resources and synchronize scripts.",
			"items": [
				{
					"title": "Edit and patch",
					"description": "Use edit for quick changes, patch for automation.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl edit <resource> <name>", "Edit live resource in your editor."],
							["kubectl patch <resource> <name> -p '{...}'", "Strategic merge patch (resource dependent)."],
							["kubectl patch <resource> <name> --type=json -p '[...]'", "JSON patch."],
							["kubectl annotate <resource> <name> key=value --overwrite", "Patch via annotation update." ]
						]
					},
					"example": "kubectl patch deploy/myapp -n default -p '{\"spec\":{\"replicas\":5}}'"
				},
				{
					"title": "Wait",
					"description": "Wait for a condition (great for scripts and CI).",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl wait --for=condition=Ready pod/<pod> --timeout=120s", "Wait for a pod to be ready."],
							["kubectl wait --for=condition=available deploy/<name> --timeout=120s", "Wait for deployment availability."],
							["kubectl wait --for=condition=complete job/<name> --timeout=600s", "Wait for job completion." ]
						]
					},
					"example": "kubectl wait -n default --for=condition=available deploy/myapp --timeout=120s"
				}
			]
		},
		{
			"title": "RBAC and Auth",
			"description": "Inspect permissions and troubleshoot authorization.",
			"items": [
				{
					"title": "Authorization checks",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl auth can-i <verb> <resource>", "Check if you can perform an action."],
							["kubectl auth can-i create pods -n default", "Example: can you create pods?"],
							["kubectl auth can-i '*' '*' -A", "Broad check across all resources (use carefully)."],
							["kubectl get role,rolebinding -n <ns>", "List namespace RBAC roles/bindings."],
							["kubectl get clusterrole,clusterrolebinding", "List cluster-level RBAC roles/bindings." ]
						]
					},
					"example": "kubectl auth can-i get pods -n default\nkubectl auth can-i create deployments -n default"
				}
			]
		},
		{
			"title": "Troubleshooting and Debugging",
			"description": "Common commands to diagnose scheduling, readiness, networking, and image issues.",
			"items": [
				{
					"title": "Events and status",
					"description": "Start with events and describe.",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl describe pod <pod>", "Most useful first step."],
							["kubectl get events --sort-by=.lastTimestamp -n <ns>", "Recent events."],
							["kubectl get pod <pod> -o yaml", "Inspect status conditions and container states."],
							["kubectl logs <pod> --previous", "Check crashloop previous logs." ]
						]
					},
					"example": "kubectl describe pod -n default my-pod\nkubectl get events -n default --sort-by=.lastTimestamp | tail -n 20"
				},
				{
					"title": "Resource usage",
					"description": "Requires metrics-server (or another metrics provider).",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl top nodes", "Node CPU/memory usage."],
							["kubectl top pods -A", "Pod CPU/memory usage."],
							["kubectl top pod <pod> -n <ns>", "Single pod usage." ]
						]
					},
					"example": "kubectl top pods -n default"
				},
				{
					"title": "Ephemeral debug containers",
					"description": "Debug running pods with ephemeral containers (cluster feature dependent).",
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl debug -it pod/<pod> --image=busybox:1.36", "Attach an ephemeral container."],
							["kubectl debug -it pod/<pod> --image=nicolaka/netshoot", "Network debugging image."],
							["kubectl debug node/<node> -it --image=busybox:1.36", "Debug a node (privileged access often required)." ]
						]
					},
					"example": "kubectl debug -n default -it pod/my-pod --image=nicolaka/netshoot"
				}
			]
		},
		{
			"title": "Workloads: StatefulSets, DaemonSets, Jobs",
			"description": "Common workload controllers beyond Deployments.",
			"items": [
				{
					"title": "StatefulSets and DaemonSets",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get sts", "List StatefulSets."],
							["kubectl describe sts <name>", "Inspect StatefulSet."],
							["kubectl get ds", "List DaemonSets."],
							["kubectl rollout status ds/<name>", "Watch DaemonSet rollout." ]
						]
					},
					"example": "kubectl get sts,ds -n default"
				},
				{
					"title": "Jobs and CronJobs",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get jobs", "List jobs."],
							["kubectl describe job <name>", "Inspect job."],
							["kubectl get cronjob", "List CronJobs."],
							["kubectl create job <name> --from=cronjob/<cronjob>", "Run a CronJob immediately."],
							["kubectl logs job/<name>", "Get logs for a Job (may need pod logs)." ]
						]
					},
					"example": "kubectl get cronjob -n default\nkubectl create job run-now --from=cronjob/nightly -n default"
				}
			]
		},
		{
			"title": "Storage",
			"description": "Persistent volumes and claims.",
			"items": [
				{
					"title": "PV/PVC basics",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl get pv", "List PersistentVolumes."],
							["kubectl get pvc -A", "List PersistentVolumeClaims."],
							["kubectl describe pvc <name> -n <ns>", "Inspect binding/events."],
							["kubectl get storageclass", "List StorageClasses." ]
						]
					},
					"example": "kubectl get pv\nkubectl get pvc -n default"
				}
			]
		},
		{
			"title": "Kustomize (kubectl -k)",
			"description": "kubectl can apply Kustomize overlays without a separate binary.",
			"items": [
				{
					"title": "Apply overlays",
					"description": null,
					"table": {
						"headers": ["Command", "Description"],
						"rows": [
							["kubectl apply -k ./overlays/dev", "Apply an overlay."],
							["kubectl delete -k ./overlays/dev", "Delete resources from an overlay."],
							["kubectl kustomize ./overlays/dev", "Render manifests to stdout." ]
						]
					},
					"example": "kubectl kustomize ./overlays/dev | less\nkubectl apply -k ./overlays/dev"
				}
			]
		}
	]
}
